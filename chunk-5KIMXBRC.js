import{d as x,ia as b,l as h}from"./chunk-ZKLAVKVL.js";import{I as m,K as p,a as i,ba as d,ea as f,ka as a,p as l,v as u}from"./chunk-NZ223L2A.js";function O(e){return class extends e{destroy$=new l;ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.destroy$.unsubscribe()}}}var T=class e{urlService=a(h);http=a(x);store=a(b);startStream(t){return this.http.post(this.urlService.URLS.AVATAR+"/start-stream",{},{params:i({},t?{size:"life-size"}:void 0)}).pipe(d(r=>this.store.updateStreamId(r.data.id)))}closeStream(){let t=this.store.streamId();return this.store.updateStreamId(""),this.http.delete(this.urlService.URLS.AVATAR+`/close-stream/${t}`)}retrieveStream(){return this.http.get(this.urlService.URLS.AVATAR+`/retrieve-stream/${this.store.streamId()}`)}checkStreamStatus(){return this.http.get(this.urlService.URLS.AVATAR+`/stream-status/${this.store.streamId()}`)}sendCandidate(t){return this.http.post(this.urlService.URLS.AVATAR+`/send-candidate/${this.store.streamId()}`,{candidate:t})}sendAnswer(t){return this.http.put(this.urlService.URLS.AVATAR+`/send-answer/${this.store.streamId()}`,{answer:t})}interruptAvatar(){return this.http.delete(this.urlService.URLS.AVATAR+`/stop-render/${this.store.streamId()}`)}renderText(){return this.http.post(this.urlService.URLS.AVATAR+`/render-text/${this.store.streamId()}`,{})}static \u0275fac=function(r){return new(r||e)};static \u0275prov=f({token:e,factory:e.\u0275fac,providedIn:"root"})};function B(e=!1){return t=>t.pipe(p(r=>(e&&console.log(r),u("CUSTOM_ERROR")))).pipe(m(r=>r!=="CUSTOM_ERROR"))}function G(){let e=new Date().getTime(),t=typeof performance<"u"&&performance.now&&performance.now()*1e3||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){let o=Math.random()*16;return e>0?(o=(e+o)%16|0,e=Math.floor(e/16)):(o=(t+o)%16|0,t=Math.floor(t/16)),(r==="x"?o:o&3|8).toString(16)})}function R(e){return/[\u0600-\u06FF]+/.test(e)}var _=e=>(e.split(" ").map(t=>(R(t)?"\u202A":"\u202C")+t).join(" "),e);function K(e,t){let r=e.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>");if(!t?.context)return r.trim();let o=Array.from(new Map(t.context.citations.map(s=>[s.url+s.title,s])).values()),c=new Set;return r=r.replace(/\[(.*?)\]/g,(s,y)=>{let g=Number(y.replace(/[^0-9]/g,""))-1,n=o[g];if(!n||c.has(n.url+n.title))return"";c.add(n.url+n.title);let C=n.title;return`<br /><small class="px-1 text-primary"><a target="_blank" href="${n.url}">${C}</a><i class="link-icon"></i></small>`}),r.trim()}export{O as a,T as b,B as c,G as d,_ as e,K as f};
