import{a as Ft,b as Ot,c as Le}from"./chunk-5KIMXBRC.js";import{ia as Ae,k as zt,ka as Qt,la as jt,m as be}from"./chunk-ZKLAVKVL.js";import{$ as U,Bb as N,Cc as ve,Ea as _t,Ec as kt,Fb as w,Fc as Ut,Gb as m,H as Et,Hb as S,I as vt,Ia as It,Ib as re,Ja as Bt,K as bt,Lb as P,Nb as b,Rb as Nt,S as At,Sb as Pt,Tb as qt,Vb as oe,Wb as ye,Xb as Ke,Yb as A,Zb as Se,_b as se,aa as Oe,ac as $,ba as Ce,bb as p,bc as Ee,cb as je,cc as ae,d as f,dc as Je,e as Zn,ec as Ht,fc as Dt,h as te,ib as xt,ka as V,ma as J,mb as Vt,nb as ie,pb as Mt,r as ze,sc as $e,tb as z,u as me,ua as Lt,va as M,wa as R,wb as we,xa as ne,xb as E,ya as Qe,z as Fe,za as Tt,zb as Rt}from"./chunk-NZ223L2A.js";var Yt=f((Lr,Gt)=>{"use strict";Gt.exports=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}});var q=f(F=>{"use strict";var Ge,oi=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];F.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};F.getSymbolTotalCodewords=function(e){return oi[e]};F.getBCHDigit=function(i){let e=0;for(;i!==0;)e++,i>>>=1;return e};F.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');Ge=e};F.isKanjiModeEnabled=function(){return typeof Ge<"u"};F.toSJIS=function(e){return Ge(e)}});var _e=f(v=>{"use strict";v.L={bit:1};v.M={bit:0};v.Q={bit:3};v.H={bit:2};function si(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"l":case"low":return v.L;case"m":case"medium":return v.M;case"q":case"quartile":return v.Q;case"h":case"high":return v.H;default:throw new Error("Unknown EC Level: "+i)}}v.isValid=function(e){return e&&typeof e.bit<"u"&&e.bit>=0&&e.bit<4};v.from=function(e,t){if(v.isValid(e))return e;try{return si(e)}catch{return t}}});var Xt=f((Ir,Zt)=>{"use strict";function Wt(){this.buffer=[],this.length=0}Wt.prototype={get:function(i){let e=Math.floor(i/8);return(this.buffer[e]>>>7-i%8&1)===1},put:function(i,e){for(let t=0;t<e;t++)this.putBit((i>>>e-t-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(i){let e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),i&&(this.buffer[e]|=128>>>this.length%8),this.length++}};Zt.exports=Wt});var tn=f((Br,en)=>{"use strict";function le(i){if(!i||i<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=i,this.data=new Uint8Array(i*i),this.reservedBit=new Uint8Array(i*i)}le.prototype.set=function(i,e,t,n){let r=i*this.size+e;this.data[r]=t,n&&(this.reservedBit[r]=!0)};le.prototype.get=function(i,e){return this.data[i*this.size+e]};le.prototype.xor=function(i,e,t){this.data[i*this.size+e]^=t};le.prototype.isReserved=function(i,e){return this.reservedBit[i*this.size+e]};en.exports=le});var nn=f(Ie=>{"use strict";var ai=q().getSymbolSize;Ie.getRowColCoords=function(e){if(e===1)return[];let t=Math.floor(e/7)+2,n=ai(e),r=n===145?26:Math.ceil((n-13)/(2*t-2))*2,o=[n-7];for(let s=1;s<t-1;s++)o[s]=o[s-1]-r;return o.push(6),o.reverse()};Ie.getPositions=function(e){let t=[],n=Ie.getRowColCoords(e),r=n.length;for(let o=0;o<r;o++)for(let s=0;s<r;s++)o===0&&s===0||o===0&&s===r-1||o===r-1&&s===0||t.push([n[o],n[s]]);return t}});var sn=f(on=>{"use strict";var li=q().getSymbolSize,rn=7;on.getPositions=function(e){let t=li(e);return[[0,0],[t-rn,0],[0,t-rn]]}});var an=f(h=>{"use strict";h.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var O={N1:3,N2:3,N3:40,N4:10};h.isValid=function(e){return e!=null&&e!==""&&!isNaN(e)&&e>=0&&e<=7};h.from=function(e){return h.isValid(e)?parseInt(e,10):void 0};h.getPenaltyN1=function(e){let t=e.size,n=0,r=0,o=0,s=null,a=null;for(let l=0;l<t;l++){r=o=0,s=a=null;for(let c=0;c<t;c++){let u=e.get(l,c);u===s?r++:(r>=5&&(n+=O.N1+(r-5)),s=u,r=1),u=e.get(c,l),u===a?o++:(o>=5&&(n+=O.N1+(o-5)),a=u,o=1)}r>=5&&(n+=O.N1+(r-5)),o>=5&&(n+=O.N1+(o-5))}return n};h.getPenaltyN2=function(e){let t=e.size,n=0;for(let r=0;r<t-1;r++)for(let o=0;o<t-1;o++){let s=e.get(r,o)+e.get(r,o+1)+e.get(r+1,o)+e.get(r+1,o+1);(s===4||s===0)&&n++}return n*O.N2};h.getPenaltyN3=function(e){let t=e.size,n=0,r=0,o=0;for(let s=0;s<t;s++){r=o=0;for(let a=0;a<t;a++)r=r<<1&2047|e.get(s,a),a>=10&&(r===1488||r===93)&&n++,o=o<<1&2047|e.get(a,s),a>=10&&(o===1488||o===93)&&n++}return n*O.N3};h.getPenaltyN4=function(e){let t=0,n=e.data.length;for(let o=0;o<n;o++)t+=e.data[o];return Math.abs(Math.ceil(t*100/n/5)-10)*O.N4};function ci(i,e,t){switch(i){case h.Patterns.PATTERN000:return(e+t)%2===0;case h.Patterns.PATTERN001:return e%2===0;case h.Patterns.PATTERN010:return t%3===0;case h.Patterns.PATTERN011:return(e+t)%3===0;case h.Patterns.PATTERN100:return(Math.floor(e/2)+Math.floor(t/3))%2===0;case h.Patterns.PATTERN101:return e*t%2+e*t%3===0;case h.Patterns.PATTERN110:return(e*t%2+e*t%3)%2===0;case h.Patterns.PATTERN111:return(e*t%3+(e+t)%2)%2===0;default:throw new Error("bad maskPattern:"+i)}}h.applyMask=function(e,t){let n=t.size;for(let r=0;r<n;r++)for(let o=0;o<n;o++)t.isReserved(o,r)||t.xor(o,r,ci(e,o,r))};h.getBestMask=function(e,t){let n=Object.keys(h.Patterns).length,r=0,o=1/0;for(let s=0;s<n;s++){t(s),h.applyMask(s,e);let a=h.getPenaltyN1(e)+h.getPenaltyN2(e)+h.getPenaltyN3(e)+h.getPenaltyN4(e);h.applyMask(s,e),a<o&&(o=a,r=s)}return r}});var We=f(Ye=>{"use strict";var H=_e(),Be=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],xe=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Ye.getBlocksCount=function(e,t){switch(t){case H.L:return Be[(e-1)*4+0];case H.M:return Be[(e-1)*4+1];case H.Q:return Be[(e-1)*4+2];case H.H:return Be[(e-1)*4+3];default:return}};Ye.getTotalCodewordsCount=function(e,t){switch(t){case H.L:return xe[(e-1)*4+0];case H.M:return xe[(e-1)*4+1];case H.Q:return xe[(e-1)*4+2];case H.H:return xe[(e-1)*4+3];default:return}}});var ln=f(Me=>{"use strict";var ce=new Uint8Array(512),Ve=new Uint8Array(256);(function(){let e=1;for(let t=0;t<255;t++)ce[t]=e,Ve[e]=t,e<<=1,e&256&&(e^=285);for(let t=255;t<512;t++)ce[t]=ce[t-255]})();Me.log=function(e){if(e<1)throw new Error("log("+e+")");return Ve[e]};Me.exp=function(e){return ce[e]};Me.mul=function(e,t){return e===0||t===0?0:ce[Ve[e]+Ve[t]]}});var cn=f(ue=>{"use strict";var Ze=ln();ue.mul=function(e,t){let n=new Uint8Array(e.length+t.length-1);for(let r=0;r<e.length;r++)for(let o=0;o<t.length;o++)n[r+o]^=Ze.mul(e[r],t[o]);return n};ue.mod=function(e,t){let n=new Uint8Array(e);for(;n.length-t.length>=0;){let r=n[0];for(let s=0;s<t.length;s++)n[s]^=Ze.mul(t[s],r);let o=0;for(;o<n.length&&n[o]===0;)o++;n=n.slice(o)}return n};ue.generateECPolynomial=function(e){let t=new Uint8Array([1]);for(let n=0;n<e;n++)t=ue.mul(t,new Uint8Array([1,Ze.exp(n)]));return t}});var fn=f((qr,dn)=>{"use strict";var un=cn();function Xe(i){this.genPoly=void 0,this.degree=i,this.degree&&this.initialize(this.degree)}Xe.prototype.initialize=function(e){this.degree=e,this.genPoly=un.generateECPolynomial(this.degree)};Xe.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");let t=new Uint8Array(e.length+this.degree);t.set(e);let n=un.mod(t,this.genPoly),r=this.degree-n.length;if(r>0){let o=new Uint8Array(this.degree);return o.set(n,r),o}return n};dn.exports=Xe});var et=f(hn=>{"use strict";hn.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}});var tt=f(I=>{"use strict";var gn="[0-9]+",ui="[A-Z $%*+\\-./:]+",de="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";de=de.replace(/u/g,"\\u");var di="(?:(?![A-Z0-9 $%*+\\-./:]|"+de+`)(?:.|[\r
]))+`;I.KANJI=new RegExp(de,"g");I.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");I.BYTE=new RegExp(di,"g");I.NUMERIC=new RegExp(gn,"g");I.ALPHANUMERIC=new RegExp(ui,"g");var fi=new RegExp("^"+de+"$"),hi=new RegExp("^"+gn+"$"),gi=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");I.testKanji=function(e){return fi.test(e)};I.testNumeric=function(e){return hi.test(e)};I.testAlphanumeric=function(e){return gi.test(e)}});var D=f(C=>{"use strict";var pi=et(),nt=tt();C.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]};C.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]};C.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]};C.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]};C.MIXED={bit:-1};C.getCharCountIndicator=function(e,t){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!pi.isValid(t))throw new Error("Invalid version: "+t);return t>=1&&t<10?e.ccBits[0]:t<27?e.ccBits[1]:e.ccBits[2]};C.getBestModeForData=function(e){return nt.testNumeric(e)?C.NUMERIC:nt.testAlphanumeric(e)?C.ALPHANUMERIC:nt.testKanji(e)?C.KANJI:C.BYTE};C.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")};C.isValid=function(e){return e&&e.bit&&e.ccBits};function mi(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return C.NUMERIC;case"alphanumeric":return C.ALPHANUMERIC;case"kanji":return C.KANJI;case"byte":return C.BYTE;default:throw new Error("Unknown mode: "+i)}}C.from=function(e,t){if(C.isValid(e))return e;try{return mi(e)}catch{return t}}});var yn=f(Q=>{"use strict";var Re=q(),Ci=We(),pn=_e(),k=D(),it=et(),Cn=7973,mn=Re.getBCHDigit(Cn);function wi(i,e,t){for(let n=1;n<=40;n++)if(e<=Q.getCapacity(n,t,i))return n}function wn(i,e){return k.getCharCountIndicator(i,e)+4}function yi(i,e){let t=0;return i.forEach(function(n){let r=wn(n.mode,e);t+=r+n.getBitsLength()}),t}function Si(i,e){for(let t=1;t<=40;t++)if(yi(i,t)<=Q.getCapacity(t,e,k.MIXED))return t}Q.from=function(e,t){return it.isValid(e)?parseInt(e,10):t};Q.getCapacity=function(e,t,n){if(!it.isValid(e))throw new Error("Invalid QR Code version");typeof n>"u"&&(n=k.BYTE);let r=Re.getSymbolTotalCodewords(e),o=Ci.getTotalCodewordsCount(e,t),s=(r-o)*8;if(n===k.MIXED)return s;let a=s-wn(n,e);switch(n){case k.NUMERIC:return Math.floor(a/10*3);case k.ALPHANUMERIC:return Math.floor(a/11*2);case k.KANJI:return Math.floor(a/13);case k.BYTE:default:return Math.floor(a/8)}};Q.getBestVersionForData=function(e,t){let n,r=pn.from(t,pn.M);if(Array.isArray(e)){if(e.length>1)return Si(e,r);if(e.length===0)return 1;n=e[0]}else n=e;return wi(n.mode,n.getLength(),r)};Q.getEncodedBits=function(e){if(!it.isValid(e)||e<7)throw new Error("Invalid QR Code version");let t=e<<12;for(;Re.getBCHDigit(t)-mn>=0;)t^=Cn<<Re.getBCHDigit(t)-mn;return e<<12|t}});var bn=f(vn=>{"use strict";var rt=q(),En=1335,Ei=21522,Sn=rt.getBCHDigit(En);vn.getEncodedBits=function(e,t){let n=e.bit<<3|t,r=n<<10;for(;rt.getBCHDigit(r)-Sn>=0;)r^=En<<rt.getBCHDigit(r)-Sn;return(n<<10|r)^Ei}});var Ln=f((Fr,An)=>{"use strict";var vi=D();function G(i){this.mode=vi.NUMERIC,this.data=i.toString()}G.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};G.prototype.getLength=function(){return this.data.length};G.prototype.getBitsLength=function(){return G.getBitsLength(this.data.length)};G.prototype.write=function(e){let t,n,r;for(t=0;t+3<=this.data.length;t+=3)n=this.data.substr(t,3),r=parseInt(n,10),e.put(r,10);let o=this.data.length-t;o>0&&(n=this.data.substr(t),r=parseInt(n,10),e.put(r,o*3+1))};An.exports=G});var _n=f((Or,Tn)=>{"use strict";var bi=D(),ot=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Y(i){this.mode=bi.ALPHANUMERIC,this.data=i}Y.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};Y.prototype.getLength=function(){return this.data.length};Y.prototype.getBitsLength=function(){return Y.getBitsLength(this.data.length)};Y.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let n=ot.indexOf(this.data[t])*45;n+=ot.indexOf(this.data[t+1]),e.put(n,11)}this.data.length%2&&e.put(ot.indexOf(this.data[t]),6)};Tn.exports=Y});var Bn=f((Qr,In)=>{"use strict";var Ai=D();function W(i){this.mode=Ai.BYTE,typeof i=="string"?this.data=new TextEncoder().encode(i):this.data=new Uint8Array(i)}W.getBitsLength=function(e){return e*8};W.prototype.getLength=function(){return this.data.length};W.prototype.getBitsLength=function(){return W.getBitsLength(this.data.length)};W.prototype.write=function(i){for(let e=0,t=this.data.length;e<t;e++)i.put(this.data[e],8)};In.exports=W});var Vn=f((jr,xn)=>{"use strict";var Li=D(),Ti=q();function Z(i){this.mode=Li.KANJI,this.data=i}Z.getBitsLength=function(e){return e*13};Z.prototype.getLength=function(){return this.data.length};Z.prototype.getBitsLength=function(){return Z.getBitsLength(this.data.length)};Z.prototype.write=function(i){let e;for(e=0;e<this.data.length;e++){let t=Ti.toSJIS(this.data[e]);if(t>=33088&&t<=40956)t-=33088;else if(t>=57408&&t<=60351)t-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);t=(t>>>8&255)*192+(t&255),i.put(t,13)}};xn.exports=Z});var Mn=f((Kr,st)=>{"use strict";var fe={single_source_shortest_paths:function(i,e,t){var n={},r={};r[e]=0;var o=fe.PriorityQueue.make();o.push(e,0);for(var s,a,l,c,u,y,g,L,B;!o.empty();){s=o.pop(),a=s.value,c=s.cost,u=i[a]||{};for(l in u)u.hasOwnProperty(l)&&(y=u[l],g=c+y,L=r[l],B=typeof r[l]>"u",(B||L>g)&&(r[l]=g,o.push(l,g),n[l]=a))}if(typeof t<"u"&&typeof r[t]>"u"){var x=["Could not find a path from ",e," to ",t,"."].join("");throw new Error(x)}return n},extract_shortest_path_from_predecessor_list:function(i,e){for(var t=[],n=e,r;n;)t.push(n),r=i[n],n=i[n];return t.reverse(),t},find_path:function(i,e,t){var n=fe.single_source_shortest_paths(i,e,t);return fe.extract_shortest_path_from_predecessor_list(n,t)},PriorityQueue:{make:function(i){var e=fe.PriorityQueue,t={},n;i=i||{};for(n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t.queue=[],t.sorter=i.sorter||e.default_sorter,t},default_sorter:function(i,e){return i.cost-e.cost},push:function(i,e){var t={value:i,cost:e};this.queue.push(t),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};typeof st<"u"&&(st.exports=fe)});var Un=f(X=>{"use strict";var d=D(),Pn=Ln(),qn=_n(),Hn=Bn(),Dn=Vn(),he=tt(),Ne=q(),_i=Mn();function Rn(i){return unescape(encodeURIComponent(i)).length}function ge(i,e,t){let n=[],r;for(;(r=i.exec(t))!==null;)n.push({data:r[0],index:r.index,mode:e,length:r[0].length});return n}function kn(i){let e=ge(he.NUMERIC,d.NUMERIC,i),t=ge(he.ALPHANUMERIC,d.ALPHANUMERIC,i),n,r;return Ne.isKanjiModeEnabled()?(n=ge(he.BYTE,d.BYTE,i),r=ge(he.KANJI,d.KANJI,i)):(n=ge(he.BYTE_KANJI,d.BYTE,i),r=[]),e.concat(t,n,r).sort(function(s,a){return s.index-a.index}).map(function(s){return{data:s.data,mode:s.mode,length:s.length}})}function at(i,e){switch(e){case d.NUMERIC:return Pn.getBitsLength(i);case d.ALPHANUMERIC:return qn.getBitsLength(i);case d.KANJI:return Dn.getBitsLength(i);case d.BYTE:return Hn.getBitsLength(i)}}function Ii(i){return i.reduce(function(e,t){let n=e.length-1>=0?e[e.length-1]:null;return n&&n.mode===t.mode?(e[e.length-1].data+=t.data,e):(e.push(t),e)},[])}function Bi(i){let e=[];for(let t=0;t<i.length;t++){let n=i[t];switch(n.mode){case d.NUMERIC:e.push([n,{data:n.data,mode:d.ALPHANUMERIC,length:n.length},{data:n.data,mode:d.BYTE,length:n.length}]);break;case d.ALPHANUMERIC:e.push([n,{data:n.data,mode:d.BYTE,length:n.length}]);break;case d.KANJI:e.push([n,{data:n.data,mode:d.BYTE,length:Rn(n.data)}]);break;case d.BYTE:e.push([{data:n.data,mode:d.BYTE,length:Rn(n.data)}])}}return e}function xi(i,e){let t={},n={start:{}},r=["start"];for(let o=0;o<i.length;o++){let s=i[o],a=[];for(let l=0;l<s.length;l++){let c=s[l],u=""+o+l;a.push(u),t[u]={node:c,lastCount:0},n[u]={};for(let y=0;y<r.length;y++){let g=r[y];t[g]&&t[g].node.mode===c.mode?(n[g][u]=at(t[g].lastCount+c.length,c.mode)-at(t[g].lastCount,c.mode),t[g].lastCount+=c.length):(t[g]&&(t[g].lastCount=c.length),n[g][u]=at(c.length,c.mode)+4+d.getCharCountIndicator(c.mode,e))}}r=a}for(let o=0;o<r.length;o++)n[r[o]].end=0;return{map:n,table:t}}function Nn(i,e){let t,n=d.getBestModeForData(i);if(t=d.from(e,n),t!==d.BYTE&&t.bit<n.bit)throw new Error('"'+i+'" cannot be encoded with mode '+d.toString(t)+`.
 Suggested mode is: `+d.toString(n));switch(t===d.KANJI&&!Ne.isKanjiModeEnabled()&&(t=d.BYTE),t){case d.NUMERIC:return new Pn(i);case d.ALPHANUMERIC:return new qn(i);case d.KANJI:return new Dn(i);case d.BYTE:return new Hn(i)}}X.fromArray=function(e){return e.reduce(function(t,n){return typeof n=="string"?t.push(Nn(n,null)):n.data&&t.push(Nn(n.data,n.mode)),t},[])};X.fromString=function(e,t){let n=kn(e,Ne.isKanjiModeEnabled()),r=Bi(n),o=xi(r,t),s=_i.find_path(o.map,"start","end"),a=[];for(let l=1;l<s.length-1;l++)a.push(o.table[s[l]].node);return X.fromArray(Ii(a))};X.rawSplit=function(e){return X.fromArray(kn(e,Ne.isKanjiModeEnabled()))}});var Fn=f(zn=>{"use strict";var qe=q(),lt=_e(),Vi=Xt(),Mi=tn(),Ri=nn(),Ni=sn(),dt=an(),ft=We(),Pi=fn(),Pe=yn(),qi=bn(),Hi=D(),ct=Un();function Di(i,e){let t=i.size,n=Ni.getPositions(e);for(let r=0;r<n.length;r++){let o=n[r][0],s=n[r][1];for(let a=-1;a<=7;a++)if(!(o+a<=-1||t<=o+a))for(let l=-1;l<=7;l++)s+l<=-1||t<=s+l||(a>=0&&a<=6&&(l===0||l===6)||l>=0&&l<=6&&(a===0||a===6)||a>=2&&a<=4&&l>=2&&l<=4?i.set(o+a,s+l,!0,!0):i.set(o+a,s+l,!1,!0))}}function ki(i){let e=i.size;for(let t=8;t<e-8;t++){let n=t%2===0;i.set(t,6,n,!0),i.set(6,t,n,!0)}}function Ui(i,e){let t=Ri.getPositions(e);for(let n=0;n<t.length;n++){let r=t[n][0],o=t[n][1];for(let s=-2;s<=2;s++)for(let a=-2;a<=2;a++)s===-2||s===2||a===-2||a===2||s===0&&a===0?i.set(r+s,o+a,!0,!0):i.set(r+s,o+a,!1,!0)}}function zi(i,e){let t=i.size,n=Pe.getEncodedBits(e),r,o,s;for(let a=0;a<18;a++)r=Math.floor(a/3),o=a%3+t-8-3,s=(n>>a&1)===1,i.set(r,o,s,!0),i.set(o,r,s,!0)}function ut(i,e,t){let n=i.size,r=qi.getEncodedBits(e,t),o,s;for(o=0;o<15;o++)s=(r>>o&1)===1,o<6?i.set(o,8,s,!0):o<8?i.set(o+1,8,s,!0):i.set(n-15+o,8,s,!0),o<8?i.set(8,n-o-1,s,!0):o<9?i.set(8,15-o-1+1,s,!0):i.set(8,15-o-1,s,!0);i.set(n-8,8,1,!0)}function Fi(i,e){let t=i.size,n=-1,r=t-1,o=7,s=0;for(let a=t-1;a>0;a-=2)for(a===6&&a--;;){for(let l=0;l<2;l++)if(!i.isReserved(r,a-l)){let c=!1;s<e.length&&(c=(e[s]>>>o&1)===1),i.set(r,a-l,c),o--,o===-1&&(s++,o=7)}if(r+=n,r<0||t<=r){r-=n,n=-n;break}}}function Oi(i,e,t){let n=new Vi;t.forEach(function(l){n.put(l.mode.bit,4),n.put(l.getLength(),Hi.getCharCountIndicator(l.mode,i)),l.write(n)});let r=qe.getSymbolTotalCodewords(i),o=ft.getTotalCodewordsCount(i,e),s=(r-o)*8;for(n.getLengthInBits()+4<=s&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);let a=(s-n.getLengthInBits())/8;for(let l=0;l<a;l++)n.put(l%2?17:236,8);return Qi(n,i,e)}function Qi(i,e,t){let n=qe.getSymbolTotalCodewords(e),r=ft.getTotalCodewordsCount(e,t),o=n-r,s=ft.getBlocksCount(e,t),a=n%s,l=s-a,c=Math.floor(n/s),u=Math.floor(o/s),y=u+1,g=c-u,L=new Pi(g),B=0,x=new Array(s),yt=new Array(s),De=0,Wn=new Uint8Array(i.buffer);for(let K=0;K<s;K++){let Ue=K<l?u:y;x[K]=Wn.slice(B,B+Ue),yt[K]=L.encode(x[K]),B+=Ue,De=Math.max(De,Ue)}let ke=new Uint8Array(n),St=0,T,_;for(T=0;T<De;T++)for(_=0;_<s;_++)T<x[_].length&&(ke[St++]=x[_][T]);for(T=0;T<g;T++)for(_=0;_<s;_++)ke[St++]=yt[_][T];return ke}function ji(i,e,t,n){let r;if(Array.isArray(i))r=ct.fromArray(i);else if(typeof i=="string"){let c=e;if(!c){let u=ct.rawSplit(i);c=Pe.getBestVersionForData(u,t)}r=ct.fromString(i,c||40)}else throw new Error("Invalid data");let o=Pe.getBestVersionForData(r,t);if(!o)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=o;else if(e<o)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+o+`.
`);let s=Oi(e,t,r),a=qe.getSymbolSize(e),l=new Mi(a);return Di(l,e),ki(l),Ui(l,e),ut(l,t,0),e>=7&&zi(l,e),Fi(l,s),isNaN(n)&&(n=dt.getBestMask(l,ut.bind(null,l,t))),dt.applyMask(n,l),ut(l,t,n),{modules:l,version:e,errorCorrectionLevel:t,maskPattern:n,segments:r}}zn.create=function(e,t){if(typeof e>"u"||e==="")throw new Error("No input text");let n=lt.M,r,o;return typeof t<"u"&&(n=lt.from(t.errorCorrectionLevel,lt.M),r=Pe.from(t.version),o=dt.from(t.maskPattern),t.toSJISFunc&&qe.setToSJISFunction(t.toSJISFunc)),ji(e,r,n,o)}});var ht=f(j=>{"use strict";function On(i){if(typeof i=="number"&&(i=i.toString()),typeof i!="string")throw new Error("Color should be defined as hex string");let e=i.slice().replace("#","").split("");if(e.length<3||e.length===5||e.length>8)throw new Error("Invalid hex color: "+i);(e.length===3||e.length===4)&&(e=Array.prototype.concat.apply([],e.map(function(n){return[n,n]}))),e.length===6&&e.push("F","F");let t=parseInt(e.join(""),16);return{r:t>>24&255,g:t>>16&255,b:t>>8&255,a:t&255,hex:"#"+e.slice(0,6).join("")}}j.getOptions=function(e){e||(e={}),e.color||(e.color={});let t=typeof e.margin>"u"||e.margin===null||e.margin<0?4:e.margin,n=e.width&&e.width>=21?e.width:void 0,r=e.scale||4;return{width:n,scale:n?4:r,margin:t,color:{dark:On(e.color.dark||"#000000ff"),light:On(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}};j.getScale=function(e,t){return t.width&&t.width>=e+t.margin*2?t.width/(e+t.margin*2):t.scale};j.getImageWidth=function(e,t){let n=j.getScale(e,t);return Math.floor((e+t.margin*2)*n)};j.qrToImageData=function(e,t,n){let r=t.modules.size,o=t.modules.data,s=j.getScale(r,n),a=Math.floor((r+n.margin*2)*s),l=n.margin*s,c=[n.color.light,n.color.dark];for(let u=0;u<a;u++)for(let y=0;y<a;y++){let g=(u*a+y)*4,L=n.color.light;if(u>=l&&y>=l&&u<a-l&&y<a-l){let B=Math.floor((u-l)/s),x=Math.floor((y-l)/s);L=c[o[B*r+x]?1:0]}e[g++]=L.r,e[g++]=L.g,e[g++]=L.b,e[g]=L.a}}});var Qn=f(He=>{"use strict";var gt=ht();function Ki(i,e,t){i.clearRect(0,0,e.width,e.height),e.style||(e.style={}),e.height=t,e.width=t,e.style.height=t+"px",e.style.width=t+"px"}function Ji(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}He.render=function(e,t,n){let r=n,o=t;typeof r>"u"&&(!t||!t.getContext)&&(r=t,t=void 0),t||(o=Ji()),r=gt.getOptions(r);let s=gt.getImageWidth(e.modules.size,r),a=o.getContext("2d"),l=a.createImageData(s,s);return gt.qrToImageData(l.data,e,r),Ki(a,o,s),a.putImageData(l,0,0),o};He.renderToDataURL=function(e,t,n){let r=n;typeof r>"u"&&(!t||!t.getContext)&&(r=t,t=void 0),r||(r={});let o=He.render(e,t,r),s=r.type||"image/png",a=r.rendererOpts||{};return o.toDataURL(s,a.quality)}});var Jn=f(Kn=>{"use strict";var $i=ht();function jn(i,e){let t=i.a/255,n=e+'="'+i.hex+'"';return t<1?n+" "+e+'-opacity="'+t.toFixed(2).slice(1)+'"':n}function pt(i,e,t){let n=i+e;return typeof t<"u"&&(n+=" "+t),n}function Gi(i,e,t){let n="",r=0,o=!1,s=0;for(let a=0;a<i.length;a++){let l=Math.floor(a%e),c=Math.floor(a/e);!l&&!o&&(o=!0),i[a]?(s++,a>0&&l>0&&i[a-1]||(n+=o?pt("M",l+t,.5+c+t):pt("m",r,0),r=0,o=!1),l+1<e&&i[a+1]||(n+=pt("h",s),s=0)):r++}return n}Kn.render=function(e,t,n){let r=$i.getOptions(t),o=e.modules.size,s=e.modules.data,a=o+r.margin*2,l=r.color.light.a?"<path "+jn(r.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",c="<path "+jn(r.color.dark,"stroke")+' d="'+Gi(s,o,r.margin)+'"/>',u='viewBox="0 0 '+a+" "+a+'"',g='<svg xmlns="http://www.w3.org/2000/svg" '+(r.width?'width="'+r.width+'" height="'+r.width+'" ':"")+u+' shape-rendering="crispEdges">'+l+c+`</svg>
`;return typeof n=="function"&&n(null,g),g}});var Gn=f(pe=>{"use strict";var Yi=Yt(),mt=Fn(),$n=Qn(),Wi=Jn();function Ct(i,e,t,n,r){let o=[].slice.call(arguments,1),s=o.length,a=typeof o[s-1]=="function";if(!a&&!Yi())throw new Error("Callback required as last argument");if(a){if(s<2)throw new Error("Too few arguments provided");s===2?(r=t,t=e,e=n=void 0):s===3&&(e.getContext&&typeof r>"u"?(r=n,n=void 0):(r=n,n=t,t=e,e=void 0))}else{if(s<1)throw new Error("Too few arguments provided");return s===1?(t=e,e=n=void 0):s===2&&!e.getContext&&(n=t,t=e,e=void 0),new Promise(function(l,c){try{let u=mt.create(t,n);l(i(u,e,n))}catch(u){c(u)}})}try{let l=mt.create(t,n);r(null,i(l,e,n))}catch(l){r(l)}}pe.create=mt.create;pe.toCanvas=Ct.bind(null,$n.render);pe.toDataURL=Ct.bind(null,$n.renderToDataURL);pe.toString=Ct.bind(null,function(i,e,t){return Wi.render(i,t)})});var ei=["video"],ti=["idleVideo"],ni=i=>({"scale-50 left-0":i}),Kt=(i,e,t)=>({"bg-red-600":i,"bg-green-700":e,"bg-orange-500":t}),$t=(i,e)=>({"h-full":i,"w-full":e});function ii(i,e){if(i&1&&(w(0,"span",7),A(1),m()),i&2){let t=b();p(),Se(t.onlineStatus())}}function ri(i,e){if(i&1&&(w(0,"video",9,1),S(2,"source",10),m()),i&2){let t=b();E("ngClass",ae(2,$t,t.hasSize(),!t.hasSize()))("hidden",t.store.isStreamStarted())}}var Te=class i extends Ft(class{}){size=It();hasSize=$e(()=>!!this.size());fullWidth="w-full h-full block ";video=ie.required("video");idleVideo=ie("idleVideo");avatarService=V(Ot);lang=V(be);start$=new ze(1);stop$=new ze(1);store=V(Ae);init$=this.start$.asObservable().pipe(Ce(()=>this.store.updateStreamStatus("InProgress"))).pipe(Oe(this.destroy$)).pipe(At(()=>this.avatarService.startStream(this.size()).pipe(bt(e=>{throw this.store.updateStreamStatus("Stopped"),e})).pipe(Le()))).pipe(U(e=>{let{data:{webrtcData:{offer:t,iceServers:n}}}=e;return this.pc=new RTCPeerConnection({iceServers:n,iceTransportPolicy:"relay"}),this.pc.addEventListener("icecandidate",r=>{r.candidate&&this.avatarService.sendCandidate(r.candidate).subscribe()}),this.pc.addEventListener("icegatheringstatechange",r=>{r.target.iceGatheringState=="complete"&&this.video().nativeElement.paused&&(this.video().nativeElement.play().then(),this.store.updateStreamStatus("Started"))}),this.pc.addEventListener("track",r=>{this.video().nativeElement.srcObject=r.streams[0]}),this.pc.addEventListener("connectionstatechange",r=>{let o=r.target.connectionState;o==="connected"&&this.store.updateStreamStatus("Started"),o==="disconnected"&&this.store.updateStreamStatus("Stopped")}),me(this.pc.setRemoteDescription(new RTCSessionDescription(t))).pipe(U(()=>me(this.pc.createAnswer()))).pipe(U(r=>me(this.pc.setLocalDescription(r)).pipe(Fe(()=>r)))).pipe(U(r=>this.avatarService.sendAnswer(r)))})).pipe(Fe(()=>""));onlineStatus=$e(()=>{switch(this.lang.localChange(),this.store.streamingStatus()){case"Started":return this.lang.locals.connected;case"InProgress":return this.lang.locals.connecting;case"Disconnecting":return this.lang.locals.disconnecting;default:return this.lang.locals.not_connected}});ngOnInit(){return te(this,null,function*(){this.store.updateStreamStatus("Stopped"),Et(this.destroy$).pipe(Ce(()=>this.store.updateStreamStatus("Stopped"))).pipe(U(()=>this.avatarService.closeStream().pipe(Le()))).subscribe(()=>{console.log("COMPONENT DESTROYED")}),this.stop$.pipe(vt(()=>this.store.hasStream())).pipe(Ce(()=>this.store.updateStreamStatus("Disconnecting"))).pipe(Oe(this.destroy$)).pipe(U(()=>this.avatarService.closeStream().pipe(Le()))).subscribe(()=>{console.log("MANUAL CLOSE"),this.store.updateStreamStatus("Stopped")}),this.size()||this.start$.next()})}ngAfterViewInit(){this.playIdle()}playIdle(){this.idleVideo()&&this.idleVideo()?.nativeElement&&(this.idleVideo().nativeElement.src="assets/videos/idle-full.mp4",this.idleVideo().nativeElement.muted=!0,this.idleVideo().nativeElement.loop=!0,this.idleVideo().nativeElement.play().then())}static \u0275fac=(()=>{let e;return function(n){return(e||(e=Tt(i)))(n||i)}})();static \u0275cmp=J({type:i,selectors:[["app-avatar-video"]],viewQuery:function(t,n){t&1&&(oe(n.video,ei,5),oe(n.idleVideo,ti,5)),t&2&&ye(2)},hostVars:1,hostBindings:function(t,n){t&2&&we("class",n.fullWidth)},inputs:{size:[1,"size"]},standalone:!0,features:[Mt,$],decls:11,vars:23,consts:[["video",""],["idleVideo",""],["id","video-wrapper",1,"flex","items-center","w-full","h-full","justify-center"],[1,"flex","flex-col","items-center","w-full","h-full","justify-center","absolute"],[1,"flex","gap-1","shadow-2xl","shadow-white","bg-black/20","p-1","mt-2","absolute","z-50","top-0","rounded-md",3,"ngClass"],[1,"p-4","rounded-full",3,"ngClass"],[1,"p-4","absolute","pulse","rounded-full",3,"ngClass"],[1,"text-white","font-semibold"],["autoplay","",3,"hidden","ngClass"],[3,"ngClass","hidden"],["src","assets/videos/idle-full.mp4","type","video/webm"]],template:function(t,n){t&1&&(w(0,"div",2)(1,"div",3)(2,"div",4),S(3,"div",5)(4,"div",6),z(5,ii,2,1,"span",7),m(),S(6,"video",8,0),z(8,ri,3,5,"video",9),m(),A(9),Ht(10,"async"),m()),t&2&&(p(2),E("ngClass",Ee(10,ni,!n.hasSize())),p(),E("ngClass",Je(12,Kt,n.store.isStreamStopped(),n.store.isStreamStarted(),n.store.isStreamLoading())),p(),E("ngClass",Je(16,Kt,n.store.isStreamStopped(),n.store.isStreamStarted(),n.store.isStreamLoading())),p(),N(n.hasSize()?5:-1),p(),E("hidden",n.store.isStreamStopped()||n.store.isStreamLoading())("ngClass",ae(20,$t,n.hasSize(),!n.hasSize())),p(2),N(n.hasSize()?8:-1),p(),se(" ",Dt(10,8,n.init$),`
`))},dependencies:[kt,ve]})};var ee=Zn(Gn(),1);var Zi=["qrcElement"],Yn=(()=>{class i{constructor(t,n){this.renderer=t,this.sanitizer=n,this.allowEmptyString=!1,this.colorDark="#000000ff",this.colorLight="#ffffffff",this.cssClass="qrcode",this.elementType="canvas",this.errorCorrectionLevel="M",this.margin=4,this.qrdata="",this.scale=4,this.width=10,this.qrCodeURL=new _t,this.context=null}ngOnChanges(){return te(this,null,function*(){yield this.createQRCode()})}isValidQrCodeText(t){return this.allowEmptyString===!1?!(typeof t>"u"||t===""||t==="null"||t===null):!(typeof t>"u")}toDataURL(t){return new Promise((n,r)=>{(0,ee.toDataURL)(this.qrdata,t,(o,s)=>{o?r(o):n(s)})})}toCanvas(t,n){return new Promise((r,o)=>{(0,ee.toCanvas)(t,this.qrdata,n,s=>{s?o(s):r("success")})})}toSVG(t){return new Promise((n,r)=>{(0,ee.toString)(this.qrdata,t,(o,s)=>{o?r(o):n(s)})})}renderElement(t){for(let n of this.qrcElement.nativeElement.childNodes)this.renderer.removeChild(this.qrcElement.nativeElement,n);this.renderer.appendChild(this.qrcElement.nativeElement,t)}createQRCode(){return te(this,null,function*(){this.version&&this.version>40?(console.warn("[angularx-qrcode] max value for `version` is 40"),this.version=40):this.version&&this.version<1?(console.warn("[angularx-qrcode]`min value for `version` is 1"),this.version=1):this.version!==void 0&&isNaN(this.version)&&(console.warn("[angularx-qrcode] version should be a number, defaulting to auto."),this.version=void 0);try{if(!this.isValidQrCodeText(this.qrdata))throw new Error("[angularx-qrcode] Field `qrdata` is empty, set 'allowEmptyString=\"true\"' to overwrite this behaviour.");this.isValidQrCodeText(this.qrdata)&&this.qrdata===""&&(this.qrdata=" ");let t={color:{dark:this.colorDark,light:this.colorLight},errorCorrectionLevel:this.errorCorrectionLevel,margin:this.margin,scale:this.scale,version:this.version,width:this.width},n=this.imageSrc,r=this.imageHeight||40,o=this.imageWidth||40;switch(this.elementType){case"canvas":{let s=this.renderer.createElement("canvas");this.context=s.getContext("2d"),this.toCanvas(s,t).then(()=>{if(this.ariaLabel&&this.renderer.setAttribute(s,"aria-label",`${this.ariaLabel}`),this.title&&this.renderer.setAttribute(s,"title",`${this.title}`),n&&this.context){this.centerImage=new Image(o,r),n!==this.centerImage.src&&(this.centerImage.crossOrigin="anonymous",this.centerImage.src=n),r!==this.centerImage.height&&(this.centerImage.height=r),o!==this.centerImage.width&&(this.centerImage.width=o);let a=this.centerImage;a&&(a.onload=()=>{this.context?.drawImage(a,s.width/2-o/2,s.height/2-r/2,o,r)})}this.renderElement(s),this.emitQRCodeURL(s)}).catch(a=>{console.error("[angularx-qrcode] canvas error:",a)});break}case"svg":{let s=this.renderer.createElement("div");this.toSVG(t).then(a=>{this.renderer.setProperty(s,"innerHTML",a);let l=s.firstChild;this.renderer.setAttribute(l,"height",`${this.width}`),this.renderer.setAttribute(l,"width",`${this.width}`),this.renderElement(l),this.emitQRCodeURL(l)}).catch(a=>{console.error("[angularx-qrcode] svg error:",a)});break}case"url":case"img":default:{let s=this.renderer.createElement("img");this.toDataURL(t).then(a=>{this.alt&&s.setAttribute("alt",this.alt),this.ariaLabel&&s.setAttribute("aria-label",this.ariaLabel),s.setAttribute("src",a),this.title&&s.setAttribute("title",this.title),this.renderElement(s),this.emitQRCodeURL(s)}).catch(a=>{console.error("[angularx-qrcode] img/url error:",a)})}}}catch(t){console.error("[angularx-qrcode] Error generating QR Code:",t.message)}})}convertBase64ImageUrlToBlob(t){let n=t.split(";base64,"),r=n[0].split(":")[1],o=atob(n[1]),s=new Uint8Array(o.length);for(let a=0;a<o.length;++a)s[a]=o.charCodeAt(a);return new Blob([s],{type:r})}emitQRCodeURL(t){let n=t.constructor.name;if(n===SVGSVGElement.name){let l=t.outerHTML,c=new Blob([l],{type:"image/svg+xml"}),u=URL.createObjectURL(c),y=this.sanitizer.bypassSecurityTrustUrl(u);this.qrCodeURL.emit(y);return}let r="";n===HTMLCanvasElement.name&&(r=t.toDataURL("image/png")),n===HTMLImageElement.name&&(r=t.src);let o=this.convertBase64ImageUrlToBlob(r),s=URL.createObjectURL(o),a=this.sanitizer.bypassSecurityTrustUrl(s);this.qrCodeURL.emit(a)}static{this.\u0275fac=function(n){return new(n||i)(je(xt),je(zt))}}static{this.\u0275cmp=J({type:i,selectors:[["qrcode"]],viewQuery:function(n,r){if(n&1&&Nt(Zi,7),n&2){let o;Pt(o=qt())&&(r.qrcElement=o.first)}},inputs:{allowEmptyString:"allowEmptyString",colorDark:"colorDark",colorLight:"colorLight",cssClass:"cssClass",elementType:"elementType",errorCorrectionLevel:"errorCorrectionLevel",imageSrc:"imageSrc",imageHeight:"imageHeight",imageWidth:"imageWidth",margin:"margin",qrdata:"qrdata",scale:"scale",version:"version",width:"width",alt:"alt",ariaLabel:"ariaLabel",title:"title"},outputs:{qrCodeURL:"qrCodeURL"},standalone:!0,features:[Lt,$],decls:2,vars:2,consts:[["qrcElement",""]],template:function(n,r){n&1&&S(0,"div",null,0),n&2&&Rt(r.cssClass)},encapsulation:2,changeDetection:0})}}return i})();var Xi=["avatarVideoComponent"],er=i=>({"-translate-x-full":i}),tr=(i,e)=>({"bg-green-700":i,"bg-red-600":e});function nr(i,e){i&1&&(w(0,"div",2)(1,"div",15),S(2,"div")(3,"div")(4,"div")(5,"div"),m()())}function ir(i,e){if(i&1){let t=re();w(0,"div",16),P("click",function(){M(t);let r=b();return R(r.qrCodeOpened=!1)}),w(1,"div",17),P("click",function(r){return M(t),R(r.stopPropagation())}),w(2,"button",18),P("click",function(){M(t);let r=b();return R(r.qrCodeOpened=!1)}),ne(),w(3,"svg",19)(4,"title"),A(5,"close"),m(),S(6,"path",20),m()(),Qe(),S(7,"qrcode",21),w(8,"span",22),A(9),m()()()}if(i&2){let t=b();p(7),E("qrdata",t.getQRData())("width",256),p(2),se("streamId: ",t.store.streamId(),"")}}function rr(i,e){if(i&1&&(w(0,"button",9)(1,"div",23)(2,"span"),A(3),m()()()),i&2){b();let t=Ke(1);p(3),Se(t.onlineStatus())}}function or(i,e){if(i&1){let t=re();w(0,"button",24),P("click",function(){M(t);let r=b();return R(r.toggleStream())}),A(1),m()}if(i&2){let t=b(),n=Ke(1);E("ngClass",ae(2,tr,t.store.isStreamStarted(),t.store.isStreamStopped())),p(),se(" ",n.onlineStatus()," ")}}function sr(i,e){if(i&1){let t=re();w(0,"button",11),P("click",function(){M(t);let r=b();return R(r.qrCodeOpened=!0)}),ne(),w(1,"svg",12)(2,"title"),A(3,"QR code"),m(),S(4,"path",25),m()()}}var wt=class i{avatarVideoComponent=ie.required("avatarVideoComponent");fullScreen="h-screen w-screen flex items-center justify-center";text=Vt("");element=V(Bt);store=V(Ae);lang=V(be);settingsOpened=!1;qrCodeOpened=!1;recognizing(e){this.text.set(e)}toggleFullScreen(){document.fullscreenElement?document.exitFullscreen().then():this.element.nativeElement.requestFullscreen().then()}toggleStream(){this.store.isStreamLoading()||(this.store.isStreamStopped()?this.avatarVideoComponent().start$.next():this.avatarVideoComponent().stop$.next())}toggleSettings(){this.settingsOpened=!this.settingsOpened}getQRData(){return`${location.host}/control?streamId=${this.store.streamId()}`}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=J({type:i,selectors:[["app-avatar"]],viewQuery:function(t,n){t&1&&oe(n.avatarVideoComponent,Xi,5),t&2&&ye()},hostVars:1,hostBindings:function(t,n){t&2&&we("class",n.fullScreen)},standalone:!0,features:[$],decls:19,vars:9,consts:[["avatarVideoComponent",""],[3,"size"],[1,"z-50","flex","items-center","justify-center","w-full","bg-black/50","h-full","fixed"],[1,"z-50","flex","items-center","justify-center","w-full","bg-black/80","h-full","fixed"],["id","settings",1,"bg-black/50","fixed","left-0","rounded","p-4","transition-transform",3,"ngClass"],[1,"relative","flex","flex-col"],["aria-label","Settings",1,"absolute","-top-2","-right-14","z-20","bg-black/50","rounded-r","text-white",3,"click","matTooltip"],["fill","currentColor","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24",1,"size-10"],["d","M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z"],["aria-label","close stream",1,"text-white","cursor-progress","size-20","bg-orange-500","rounded-full"],["matRipple","","aria-label","close stream",1,"text-white","size-20","rounded-full",3,"ngClass"],["matRipple","",1,"text-white",3,"click"],["fill","currentColor","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24",1,"size-20"],["d","M5,5H10V7H7V10H5V5M14,5H19V10H17V7H14V5M17,14H19V19H14V17H17V14M10,17V19H5V14H7V17H10Z"],["matRipple","",1,"text-white"],[1,"lds-ellipsis"],[1,"z-50","flex","items-center","justify-center","w-full","bg-black/80","h-full","fixed",3,"click"],[1,"relative","flex","flex-col","justify-center","items-center","gap-2",3,"click"],[1,"absolute","-top-11","-left-11","w-12","h-12","p-1","text-white","rounded-full","bg-black/85",3,"click"],["fill","currentColor","viewBox","0 0 24 24"],["d","M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"],[3,"qrdata","width"],[1,"p-1","text-white"],[1,"pulse","rounded-full","w-full","h-full","bg-primary","flex","justify-center","items-center"],["matRipple","","aria-label","close stream",1,"text-white","size-20","rounded-full",3,"click","ngClass"],["d","M3,11H5V13H3V11M11,5H13V9H11V5M9,11H13V15H11V13H9V11M15,11H17V13H19V11H21V13H19V15H21V19H19V21H17V19H13V21H11V17H15V15H17V13H15V11M19,19V15H17V19H19M15,3H21V9H15V3M17,5V7H19V5H17M3,3H9V9H3V3M5,5V7H7V5H5M3,15H9V21H3V15M5,17V19H7V17H5Z"]],template:function(t,n){if(t&1){let r=re();S(0,"app-avatar-video",1,0),z(2,nr,6,0,"div",2)(3,ir,10,3,"div",3),w(4,"div",4)(5,"div",5)(6,"button",6),P("click",function(){return M(r),R(n.toggleSettings())}),ne(),w(7,"svg",7)(8,"title"),A(9,"cog"),m(),S(10,"path",8),m()(),z(11,rr,4,1,"button",9)(12,or,2,5,"button",10),Qe(),w(13,"button",11),P("click",function(){return M(r),R(n.toggleFullScreen())}),ne(),w(14,"svg",12)(15,"title"),A(16,"fullscreen"),m(),S(17,"path",13),m()(),z(18,sr,5,0,"button",14),m()()}t&2&&(E("size","life-size"),p(2),N(n.store.isStreamLoading()?2:-1),p(),N(n.qrCodeOpened&&n.store.hasStream()?3:-1),p(),E("ngClass",Ee(7,er,!n.settingsOpened)),p(2),E("matTooltip",n.lang.locals.settings),p(5),N(n.store.isStreamLoading()?11:12),p(7),N(n.store.hasStream()?18:-1))},dependencies:[Ut,ve,Te,Yn,jt,Qt]})};export{wt as default};
